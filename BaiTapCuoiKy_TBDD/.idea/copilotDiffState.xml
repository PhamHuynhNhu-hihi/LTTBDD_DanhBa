<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/baitapcuoiky/Activity/MainActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/baitapcuoiky/Activity/MainActivity.java" />
              <option name="originalContent" value="package com.example.baitapcuoiky.Activity;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.text.Editable;&#10;import android.text.TextWatcher;&#10;import android.widget.EditText;&#10;import android.widget.ListView;&#10;import android.widget.Toast;&#10;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;&#10;import com.example.baitapcuoiky.Model.Contact;&#10;import com.example.baitapcuoiky.Adapter.ContactAdapter;&#10;import com.example.baitapcuoiky.sqlite.DatabaseHelper;&#10;import com.example.baitapcuoiky.R;&#10;import com.google.android.material.floatingactionbutton.FloatingActionButton;&#10;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;public class MainActivity extends AppCompatActivity {&#10;&#10;    private ListView listViewContacts;&#10;    private EditText edtSearch;&#10;    private FloatingActionButton btnAddContact;&#10;&#10;    private ContactAdapter adapter;&#10;    private List&lt;Contact&gt; contactList;&#10;    private List&lt;Contact&gt; filteredList;&#10;    private DatabaseHelper dbHelper;&#10;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_main);&#10;&#10;        // Khởi tạo views&#10;        listViewContacts = findViewById(R.id.listViewContacts);&#10;        edtSearch = findViewById(R.id.edtSearch);&#10;        btnAddContact = findViewById(R.id.btnAddContact);&#10;&#10;        // Khởi tạo database helper&#10;        dbHelper = new DatabaseHelper(this);&#10;&#10;        // Load danh sách liên hệ từ database&#10;        contactList = dbHelper.getAllContacts();&#10;&#10;        // Nếu chưa có dữ liệu, thêm dữ liệu mẫu&#10;        if (contactList.isEmpty()) {&#10;            dbHelper.addContact(new Contact(&quot;Nguyễn Văn A&quot;, &quot;0123456789&quot;, &quot;Đây là ghi chú mẫu&quot;));&#10;            dbHelper.addContact(new Contact(&quot;Trần Thị B&quot;, &quot;0987654321&quot;, &quot;&quot;));&#10;            dbHelper.addContact(new Contact(&quot;Lê Văn C&quot;, &quot;0369852147&quot;, &quot;Gọi vào giờ hành chính&quot;));&#10;            contactList = dbHelper.getAllContacts();&#10;        }&#10;&#10;        filteredList = new ArrayList&lt;&gt;(contactList);&#10;&#10;        // Thiết lập adapter&#10;        adapter = new ContactAdapter(this, filteredList);&#10;        listViewContacts.setAdapter(adapter);&#10;&#10;        edtSearch.addTextChangedListener(new TextWatcher() {&#10;            @Override&#10;            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}&#10;&#10;            @Override&#10;            public void onTextChanged(CharSequence s, int start, int before, int count) {&#10;                filterContacts();&#10;            }&#10;&#10;            @Override&#10;            public void afterTextChanged(Editable s) {}&#10;        });&#10;&#10;        adapter.setOnItemClickListener(contact -&gt; {&#10;            Intent intent = new Intent(MainActivity.this, ContactDetailActivity.class);&#10;            intent.putExtra(&quot;contactId&quot;, contact.getId());&#10;            intent.putExtra(&quot;name&quot;, contact.getName());&#10;            intent.putExtra(&quot;phone&quot;, contact.getPhone());&#10;            intent.putExtra(&quot;note&quot;, contact.getNote());&#10;            startActivityForResult(intent, 1);&#10;        });&#10;&#10;        btnAddContact.setOnClickListener(v -&gt; {&#10;        // Xử lý nút thêm liên hệ&#10;            startActivityForResult(new Intent(this, AddContactActivity.class), 1);&#10;        });&#10;    }&#10;&#10;    private void filterContacts() {&#10;    // Phương thức lọc danh sách liên hệ&#10;        String search = edtSearch.getText().toString().toLowerCase().trim();&#10;        filteredList.clear();&#10;        for (Contact c : contactList) {&#10;            if (c.getName().toLowerCase().contains(search) || c.getPhone().contains(search)) {&#10;                filteredList.add(c);&#10;            }&#10;        }&#10;        adapter.notifyDataSetChanged();&#10;    }&#10;&#10;    @Override&#10;    protected void onActivityResult(int requestCode, int resultCode, Intent data) {&#10;        super.onActivityResult(requestCode, resultCode, data);&#10;        // Kiểm tra requestCode để chỉ xử lý kết quả từ Activity đã đăng ký&#10;        if ((requestCode == 1 || requestCode == 2) &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {&#10;            String action = data.getStringExtra(&quot;action&quot;);&#10;            String name = data.getStringExtra(&quot;name&quot;);&#10;            String phone = data.getStringExtra(&quot;phone&quot;);&#10;            String note = data.getStringExtra(&quot;note&quot;);&#10;            int contactId = data.getIntExtra(&quot;contactId&quot;, -1);&#10;&#10;            if (&quot;add&quot;.equals(action)) {&#10;                dbHelper.addContact(new Contact(name, phone, note != null ? note : &quot;&quot;));&#10;                Toast.makeText(this, &quot;Đã thêm liên hệ&quot;, Toast.LENGTH_SHORT).show();&#10;            } else if (&quot;edit&quot;.equals(action)) {&#10;                dbHelper.updateContact(new Contact(contactId, name, phone, note != null ? note : &quot;&quot;));&#10;                Toast.makeText(this, &quot;Đã cập nhật liên hệ&quot;, Toast.LENGTH_SHORT).show();&#10;            } else if (&quot;delete&quot;.equals(action)) {&#10;                dbHelper.deleteContact(contactId);&#10;                Toast.makeText(this, &quot;Đã xóa liên hệ&quot;, Toast.LENGTH_SHORT).show();&#10;            }&#10;            contactList = dbHelper.getAllContacts();&#10;            filterContacts();&#10;        }&#10;    }&#10;&#10;    @Override&#10;    protected void onDestroy() {&#10;        super.onDestroy();&#10;        if (dbHelper != null) {&#10;            dbHelper.close();&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.example.baitapcuoiky.Activity;&#10;&#10;import android.content.Intent;&#10;import android.os.Bundle;&#10;import android.text.Editable;&#10;import android.text.TextWatcher;&#10;import android.widget.EditText;&#10;import android.widget.ListView;&#10;import android.widget.Toast;&#10;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;&#10;import com.example.baitapcuoiky.Model.Contact;&#10;import com.example.baitapcuoiky.Adapter.ContactAdapter;&#10;import com.example.baitapcuoiky.sqlite.DatabaseHelper;&#10;import com.example.baitapcuoiky.R;&#10;import com.google.android.material.floatingactionbutton.FloatingActionButton;&#10;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;public class MainActivity extends AppCompatActivity {&#10;&#10;    private ListView listViewContacts;&#10;    private EditText edtSearch;&#10;    private FloatingActionButton btnAddContact;&#10;&#10;    private ContactAdapter adapter;&#10;    private List&lt;Contact&gt; contactList;&#10;    private List&lt;Contact&gt; filteredList;&#10;    private DatabaseHelper dbHelper;&#10;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_main);&#10;&#10;        // Khởi tạo views&#10;        listViewContacts = findViewById(R.id.listViewContacts);&#10;        edtSearch = findViewById(R.id.edtSearch);&#10;        btnAddContact = findViewById(R.id.btnAddContact);&#10;&#10;        // Khởi tạo database helper&#10;        dbHelper = new DatabaseHelper(this);&#10;&#10;        // Load danh sách liên hệ từ database&#10;        contactList = dbHelper.getAllContacts();&#10;&#10;        // Nếu chưa có dữ liệu, thêm dữ liệu mẫu&#10;        if (contactList.isEmpty()) {&#10;            dbHelper.addContact(new Contact(&quot;Nguyễn Văn A&quot;, &quot;0123456789&quot;, &quot;Đây là ghi chú mẫu&quot;));&#10;            dbHelper.addContact(new Contact(&quot;Trần Thị B&quot;, &quot;0987654321&quot;, &quot;&quot;));&#10;            dbHelper.addContact(new Contact(&quot;Lê Văn C&quot;, &quot;0369852147&quot;, &quot;Gọi vào giờ hành chính&quot;));&#10;            contactList = dbHelper.getAllContacts();&#10;        }&#10;&#10;        filteredList = new ArrayList&lt;&gt;(contactList);&#10;&#10;        // Thiết lập adapter&#10;        adapter = new ContactAdapter(this, filteredList);&#10;        listViewContacts.setAdapter(adapter);&#10;&#10;        edtSearch.addTextChangedListener(new TextWatcher() {&#10;            @Override&#10;            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}&#10;&#10;            @Override&#10;            public void onTextChanged(CharSequence s, int start, int before, int count) {&#10;                filterContacts();&#10;            }&#10;&#10;            @Override&#10;            public void afterTextChanged(Editable s) {}&#10;        });&#10;&#10;        adapter.setOnItemClickListener(contact -&gt; {&#10;            Intent intent = new Intent(MainActivity.this, ContactDetailActivity.class);&#10;            intent.putExtra(&quot;contactId&quot;, contact.getId());&#10;            intent.putExtra(&quot;name&quot;, contact.getName());&#10;            intent.putExtra(&quot;phone&quot;, contact.getPhone());&#10;            intent.putExtra(&quot;note&quot;, contact.getNote());&#10;            startActivityForResult(intent, 1);&#10;        });&#10;&#10;        btnAddContact.setOnClickListener(v -&gt; {&#10;        // Xử lý nút thêm liên hệ&#10;            startActivityForResult(new Intent(this, AddContactActivity.class), 1);&#10;        });&#10;    }&#10;&#10;    private void filterContacts() {&#10;    // Phương thức lọc danh sách liên hệ&#10;        String search = edtSearch.getText().toString().toLowerCase().trim();&#10;        filteredList.clear();&#10;        for (Contact c : contactList) {&#10;            if (c.getName().toLowerCase().contains(search) || c.getPhone().contains(search)) {&#10;                filteredList.add(c);&#10;            }&#10;        }&#10;        adapter.notifyDataSetChanged();&#10;    }&#10;&#10;    @Override&#10;    protected void onActivityResult(int requestCode, int resultCode, Intent data) {&#10;        super.onActivityResult(requestCode, resultCode, data);&#10;        // Kiểm tra requestCode để chỉ xử lý kết quả từ Activity đã đăng ký&#10;        if ((requestCode == 1 || requestCode == 2) &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {&#10;            String action = data.getStringExtra(&quot;action&quot;);&#10;            String name = data.getStringExtra(&quot;name&quot;);&#10;            String phone = data.getStringExtra(&quot;phone&quot;);&#10;            String note = data.getStringExtra(&quot;note&quot;);&#10;            int contactId = data.getIntExtra(&quot;contactId&quot;, -1);&#10;&#10;            if (&quot;add&quot;.equals(action)) {&#10;                dbHelper.addContact(new Contact(name, phone, note != null ? note : &quot;&quot;));&#10;                Toast.makeText(this, &quot;Đã thêm liên hệ&quot;, Toast.LENGTH_SHORT).show();&#10;            } else if (&quot;edit&quot;.equals(action)) {&#10;                dbHelper.updateContact(new Contact(contactId, name, phone, note != null ? note : &quot;&quot;));&#10;                Toast.makeText(this, &quot;Đã cập nhật liên hệ&quot;, Toast.LENGTH_SHORT).show();&#10;            } else if (&quot;delete&quot;.equals(action)) {&#10;                dbHelper.deleteContact(contactId);&#10;                Toast.makeText(this, &quot;Đã xóa liên hệ&quot;, Toast.LENGTH_SHORT).show();&#10;            }&#10;            contactList = dbHelper.getAllContacts();&#10;            filterContacts();&#10;        }&#10;    }&#10;&#10;    @Override&#10;    protected void onDestroy() {&#10;        super.onDestroy();&#10;        if (dbHelper != null) {&#10;            dbHelper.close();&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>